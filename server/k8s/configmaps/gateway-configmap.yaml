apiVersion: v1
kind: ConfigMap
metadata:
  name: gateway-config
  namespace: jobready
data:
  application.properties: |
    # Gateway Service Configuration
    server.port=8080

    # Application name
    spring.application.name=gateway-service

    # Gateway routes configuration - Using Kubernetes service names
    spring.cloud.gateway.routes[0].id=auth-service
    spring.cloud.gateway.routes[0].uri=http://auth-service:8082
    spring.cloud.gateway.routes[0].predicates[0]=Path=/api/v1/auth/**
    spring.cloud.gateway.routes[0].filters[0]=StripPrefix=0

    spring.cloud.gateway.routes[1].id=oauth2-service
    spring.cloud.gateway.routes[1].uri=http://auth-service:8082
    spring.cloud.gateway.routes[1].predicates[0]=Path=/api/v1/oauth2/**
    spring.cloud.gateway.routes[1].filters[0]=StripPrefix=0

    spring.cloud.gateway.routes[2].id=user-service
    spring.cloud.gateway.routes[2].uri=http://user-service:8083
    spring.cloud.gateway.routes[2].predicates[0]=Path=/api/v1/users/**
    spring.cloud.gateway.routes[2].filters[0]=StripPrefix=0

    spring.cloud.gateway.routes[3].id=cv-service
    spring.cloud.gateway.routes[3].uri=http://cv-service:8084
    spring.cloud.gateway.routes[3].predicates[0]=Path=/api/v1/cvs/**
    spring.cloud.gateway.routes[3].filters[0]=StripPrefix=0

    spring.cloud.gateway.routes[4].id=ai-service
    spring.cloud.gateway.routes[4].uri=http://ai-service:8085
    spring.cloud.gateway.routes[4].predicates[0]=Path=/api/v1/ai/**
    spring.cloud.gateway.routes[4].filters[0]=StripPrefix=0

    spring.cloud.gateway.routes[5].id=mail-service
    spring.cloud.gateway.routes[5].uri=http://mail-service:8086
    spring.cloud.gateway.routes[5].predicates[0]=Path=/api/v1/mail/**
    spring.cloud.gateway.routes[5].filters[0]=StripPrefix=0

    spring.cloud.gateway.routes[6].id=stats-service
    spring.cloud.gateway.routes[6].uri=http://stats-service:8087
    spring.cloud.gateway.routes[6].predicates[0]=Path=/api/v1/stats/**
    spring.cloud.gateway.routes[6].filters[0]=StripPrefix=0

    # Disable Eureka discovery
    spring.cloud.gateway.discovery.locator.enabled=false

    # Actuator endpoints
    management.endpoints.web.exposure.include=health,info,metrics,gateway
    management.endpoint.health.show-details=always
    management.health.livenessstate.enabled=true
    management.health.readinessstate.enabled=true

    # Logging
    logging.level.com.example.gatewayservice=INFO
    logging.level.org.springframework.cloud.gateway=INFO
